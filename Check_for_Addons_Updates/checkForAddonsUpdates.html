<!DOCTYPE HTML>
<meta charset="utf-8"/>
<title>Check for Addons Updates [0.1.4 - 2013-05-09]</title>
<body>
<a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3ECheck%20for%20Addons%20Updates%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABEVBMVEUAAAARdxEcTL9YluZYmelgmeZOkOU4f+BOk+hShdpVh9szmTNHd9MeWckdWMkRdxEfhR9Vu1UdVcYRdxGI7ohHrUcdXMwdWMkcUcMcTsFRgthv1G8zmTNVkuVhleJflOJckeFclONEh+JJkLpNiuFKi+Mpb9g8f95knOdcj99ajd9Lg9xkmeVem+kyiIxonudYidscTL9Kf9g2cdQiY9AjbqdgmeZbleVZmOhCl5Y8ctMmYs4/g+EdZqBmm+VTlOc3a89Bgt9XkeNSjeIZX5pHhuAWZ2w5iY43e905iI0rbqkWZmtYj+FTjOAmaKNQj+Qnc3khYJ0jbNchatZXleZgl+Q4dtg2iZYdaG4cWpZZmeovdSBxAAAAEHRSTlMAgH/MoZXKh52fy4Ccv39AzZGpkwAAALNJREFUeF51j8WuAkEQRXsGf9o2Pri7u7s7T///Q2joBbCgkqrknsW5KfB0rP/OR5CudR+B5WS/BVs2Vqm6t+FAy8FBJ/XlHwxD4350xoHH61utg6geORw5iCeS3z8SlSQpw5Ir91IolsomNSil5isAut5oyrLchghCSCEAb713RZlOlRGZfABCrg6MEcJ4jhZ4KVyBql6MbDcqb9G0nUkps5p7DsR8/pcZEfwTwd0I5JPdM/o+FIGIkY8MAAAAAElFTkSuQmCC%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B/*Initialization%20Code*/%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B//%20http%3A//infocatcher.ucoz.net/js/cb/checkForAddonsUpdates.js%0A//%20https%3A//forum.mozilla-russia.org/viewtopic.php%3Fid%3D57958%0A//%20https%3A//github.com/Infocatcher/Custom_Buttons/tree/master/Check_for_Addons_Updates%0A%0A//%20Check%20for%20Addons%20Updates%20button%20for%20Custom%20Buttons%0A//%20%28code%20for%20%22code%22%20section%29%0A%0A//%20%28c%29%20Infocatcher%202012-2013%0A//%20version%200.1.4%20-%202013-05-09%0A%0A//%20Button%20just%20open%20hidden%20tab%20with%20about%3Aaddons%20and%20trigger%20built-in%20%22Check%20for%20Updates%22%20function.%0A//%20And%20show%20tab%2C%20if%20found%20updates.%0A%0Avar%20btn%20%3D%20this%3B%0Aif%28%22_cb_disabled%22%20in%20btn%29%0A%09return%3B%0Abtn._cb_disabled%20%3D%20true%3B%0A%0AComponents.utils.import%28%22resource%3A//gre/modules/Services.jsm%22%29%3B%0Avar%20appName%20%3D%20Services.appinfo.name%3B%0A%0Avar%20imgConnecting%20%3D%20%22chrome%3A//browser/skin/tabbrowser/connecting.png%22%3B%0Avar%20imgLoading%20%3D%20%22chrome%3A//browser/skin/tabbrowser/loading.png%22%3B%0Aif%28appName%20%3D%3D%20%22SeaMonkey%22%29%0A%09imgConnecting%20%3D%20imgLoading%20%3D%20%22chrome%3A//communicator/skin/icons/loading.gif%22%3B%0A%0Avar%20image%20%3D%20btn.image%3B%0Avar%20tip%20%3D%20btn.tooltipText%3B%0Abtn.image%20%3D%20imgConnecting%3B%0Abtn.tooltipText%20%3D%20%22Open%20about%3Aaddons%u2026%22%3B%0A%0Avar%20tab%3B%0Avar%20ws%20%3D%20Services.wm.getEnumerator%28%22navigator%3Abrowser%22%29%3B%0AwindowsLoop%3A%0Awhile%28ws.hasMoreElements%28%29%29%20%7B%0A%09let%20w%20%3D%20ws.getNext%28%29%3B%0A%09let%20tabs%20%3D%20w.gBrowser.tabs%3B%0A%09for%28let%20i%20%3D%200%2C%20l%20%3D%20tabs.length%3B%20i%20%3C%20l%3B%20++i%29%20%7B%0A%09%09let%20t%20%3D%20tabs%5Bi%5D%3B%0A%09%09if%28%0A%09%09%09%21t.closing%0A%09%09%09%26%26%20t.linkedBrowser%0A%09%09%09%26%26%20t.linkedBrowser.currentURI.spec%20%3D%3D%20%22about%3Aaddons%22%0A%09%09%29%20%7B%0A%09%09%09tab%20%3D%20t%3B%0A%09%09%09break%20windowsLoop%3B%0A%09%09%7D%0A%09%7D%0A%7D%0A%0Aif%28%21tab%29%20%7B%0A%09tab%20%3D%20gBrowser.addTab%28%22about%3Aaddons%22%29%3B%0A%09tab.collapsed%20%3D%20true%3B%0A%09tab.closing%20%3D%20true%3B%20//%20See%20%22visibleTabs%22%20getter%20in%20chrome%3A//browser/content/tabbrowser.xml%0A%09window.addEventListener%28%22TabSelect%22%2C%20dontSelectHiddenTab%2C%20false%29%3B%0A%7D%0Aelse%20if%28%0A%09tab.getAttribute%28%22pending%22%29%20%3D%3D%20%22true%22%20//%20Gecko%20%3E%3D%209.0%0A%09%7C%7C%20tab.linkedBrowser.contentDocument.readyState%20%3D%3D%20%22uninitialized%22%0A%09//%20%7C%7C%20tab.linkedBrowser.__SS_restoreState%20%3D%3D%201%0A%29%0A%09tab.linkedBrowser.reload%28%29%3B%0A%0Avar%20browser%20%3D%20tab.linkedBrowser%3B%0Aif%28browser.webProgress.isLoadingDocument%29%0A%09browser.addEventListener%28%22load%22%2C%20processAddonsTab%2C%20true%29%3B%0Aelse%0A%09processAddonsTab%28%29%3B%0A%0Afunction%20processAddonsTab%28e%29%20%7B%0A%09var%20doc%3B%0A%09if%28e%29%20%7B%0A%09%09doc%20%3D%20e.target%3B%0A%09%09if%28doc.location%20%21%3D%20%22about%3Aaddons%22%29%0A%09%09%09return%3B%0A%09%09browser.removeEventListener%28e.type%2C%20processAddonsTab%2C%20true%29%3B%0A%09%7D%0A%09else%20%7B%0A%09%09doc%20%3D%20browser.contentDocument%3B%0A%09%7D%0A%0A%09btn.image%20%3D%20imgLoading%3B%0A%09btn.tooltipText%20%3D%20doc.getElementById%28%22updates-progress%22%29.getAttribute%28%22value%22%29%3B%0A%0A%09var%20origIcon%20%3D%20tab.image%3B%0A%09tab.image%20%3D%20image%3B%0A%0A%09var%20updEnabledPref%20%3D%20%22extensions.update.enabled%22%3B%0A%09var%20updEnabled%20%3D%20cbu.getPrefs%28updEnabledPref%29%3B%0A%09if%28%21updEnabled%29%0A%09%09cbu.setPrefs%28updEnabledPref%2C%20true%29%3B%0A%0A%09//Avoid%20getting%20false%20results%20from%20the%20past%20update%20check%20%28May%20not%20be%20required%20for%20%22noneFound%22%29%0A%09doc.getElementById%28%22updates-noneFound%22%29.hidden%20%3D%20true%3B%0A%09doc.getElementById%28%22updates-installed%22%29.hidden%20%3D%20true%3B%0A%0A%09doc.getElementById%28%22cmd_findAllUpdates%22%29.doCommand%28%29%3B%0A%0A%09var%20wait%20%3D%20setInterval%28function%28%29%20%7B%0A%09%09if%28%21doc.defaultView%20%7C%7C%20doc.defaultView.closed%29%20%7B%0A%09%09%09stopWait%28%29%3B%0A%09%09%09notify%28%22Tab%20with%20add-ons%20manager%20was%20closed%21%22%29%3B%0A%09%09%09return%3B%0A%09%09%7D%0A%09%09var%20inProgress%20%3D%20doc.getElementById%28%22updates-progress%22%29%3B%0A%09%09if%28%21inProgress.hidden%29%0A%09%09%09return%3B%0A%09%09var%20autoUpdate%20%3D%20doc.getElementById%28%22utils-autoUpdateDefault%22%29%3B%0A%09%09var%20autoUpdateChecked%20%3D%20autoUpdate.getAttribute%28%22checked%22%29%20%3D%3D%20%22true%22%3B%0A%09%09var%20updated%20%3D%20doc.getElementById%28%22updates-installed%22%29%3B%0A%09%09var%20found%20%3D%20doc.getElementById%28%22updates-manualUpdatesFound-btn%22%29%3B%0A%09%09var%20notFound%20%3D%20doc.getElementById%28%22updates-noneFound%22%29%3B%0A%0A%09%09if%28%0A%09%09%09autoUpdateChecked%0A%09%09%09%09%3F%20updated.hidden%20%26%26%20notFound.hidden%0A%09%09%09%09%3A%20found.hidden%20%26%26%20notFound.hidden%0A%09%09%29%20//%20Too%20early%3F%0A%09%09%09return%3B%0A%0A%09%09stopWait%28%29%3B%0A%09%09tab.closing%20%3D%20false%3B%0A%0A%09%09if%28%21updEnabled%29%0A%09%09%09cbu.setPrefs%28updEnabledPref%2C%20false%29%3B%0A%0A%09%09if%28%21notFound.hidden%29%20%7B%0A%09%09%09if%28tab.collapsed%29%0A%09%09%09%09gBrowser.removeTab%28tab%29%3B%0A%09%09%09notify%28notFound.getAttribute%28%22value%22%29%29%3B%0A%09%09%09return%3B%0A%09%09%7D%0A%09%09if%28autoUpdateChecked%29%20%7B%0A%09%09%09if%28tab.collapsed%29%0A%09%09%09%09gBrowser.removeTab%28tab%29%3B%0A%09%09%09notify%28updated.getAttribute%28%22value%22%29%29%3B%0A%09%09%09return%3B%0A%09%09%7D%0A%09%09tab.collapsed%20%3D%20false%3B%0A%09%09doc.getElementById%28%22categories%22%29.selectedItem%20%3D%20doc.getElementById%28%22category-availableUpdates%22%29%3B%0A%09%09var%20tabWin%20%3D%20tab.ownerDocument.defaultView%3B%0A%09%09tabWin.gBrowser.selectedTab%20%3D%20tab%3B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09tabWin.focus%28%29%3B%0A%09%09%09doc.defaultView.focus%28%29%3B%0A%09%09%09doc.getElementById%28%22addon-list%22%29.focus%28%29%3B%0A%09%09%7D%2C%200%29%3B%0A%09%7D%2C%2050%29%3B%0A%09function%20stopWait%28%29%20%7B%0A%09%09clearInterval%28wait%29%3B%0A%09%09btn.image%20%3D%20image%3B%0A%09%09btn.tooltipText%20%3D%20tip%3B%0A%09%09if%28tab.image%20%3D%3D%20image%29%0A%09%09%09tab.image%20%3D%20origIcon%3B%0A%09%09window.removeEventListener%28%22TabSelect%22%2C%20dontSelectHiddenTab%2C%20false%29%3B%0A%09%09setTimeout%28function%28%29%20%7B%0A%09%09%09delete%20btn._cb_disabled%3B%0A%09%09%7D%2C%20500%29%3B%0A%09%7D%0A%09function%20notify%28msg%29%20%7B%0A%09%09Components.classes%5B%22@mozilla.org/alerts-service%3B1%22%5D%0A%09%09%09.getService%28Components.interfaces.nsIAlertsService%29%0A%09%09%09.showAlertNotification%28%0A%09%09%09%09%22chrome%3A//mozapps/skin/extensions/extensionGeneric.png%22%2C%0A%09%09%09%09btn.label%2C%0A%09%09%09%09msg%2C%20false%2C%20%22%22%2C%20null%0A%09%09%09%29%3B%0A%09%7D%0A%7D%0Afunction%20dontSelectHiddenTab%28e%29%20%7B%0A%09//%20%3Ctab%20/%3E%3Ctab%20collapsed%3D%22true%22%20/%3E%0A%09//%20Close%20first%20tab%3A%20collapsed%20tab%20becomes%20selected%0A%09if%28e.target%20%21%3D%20tab%29%0A%09%09return%3B%0A%0A%09if%28/%5Cn%28%3F%3ABrowserOpenAddonsMgr%7CtoEM%29@chrome%3A%5C/%5C//.test%28new%20Error%28%29.stack%29%29%20%7B%0A%09%09//%20User%20open%20Add-ons%20Manager%2C%20show%20tab%0A%09%09window.removeEventListener%28%22TabSelect%22%2C%20dontSelectHiddenTab%2C%20false%29%3B%0A%09%09setTimeout%28function%28%29%20%7B%20//%20Hidden%20tab%20can%27t%20be%20selected%2C%20so%20select%20it%20manually...%0A%09%09%09tab.collapsed%20%3D%20tab.closing%20%3D%20false%3B%0A%09%09%09gBrowser.selectedTab%20%3D%20tab%3B%0A%09%09%7D%2C%200%29%3B%0A%09%7D%0A%0A%09function%20done%28t%29%20%7B%0A%09%09if%28%21t.hidden%20%26%26%20%21t.closing%29%20%7B%0A%09%09%09e.preventDefault%28%29%3B%0A%09%09%09e.stopPropagation%28%29%3B%0A%09%09%09return%20gBrowser.selectedTab%20%3D%20t%3B%0A%09%09%7D%0A%09%09return%20false%3B%0A%09%7D%0A%09for%28var%20t%20%3D%20tab.nextSibling%3B%20t%3B%20t%20%3D%20t.nextSibling%29%0A%09%09if%28done%28t%29%29%0A%09%09%09return%3B%0A%09for%28var%20t%20%3D%20tab.previousSibling%3B%20t%3B%20t%20%3D%20t.previousSibling%29%0A%09%09if%28done%28t%29%29%0A%09%09%09return%3B%0A%7D%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E"
>Install</a>
| <a href="https://github.com/Infocatcher/Custom_Buttons/tree/master/Check_for_Addons_Updates">Source</a>
| <a href="https://github.com/Infocatcher/Custom_Buttons#usage">Instructions</a>
<script type="text/javascript">
var a = document.getElementsByTagName("a")[0];
a.title = document.title;
if(/%3Cimage%3E%3C%21%5BCDATA%5B(data%3A\S+)%5D%5D%3E%3C\/image%3E/.test(a.href)) {
	var icon = decodeURIComponent(RegExp.$1);

	var img = document.createElement("img");
	img.src = icon;
	img.alt = "";
	img.style.verticalAlign = "middle";
	img.style.marginRight = "4px";
	img.style.border = "none";
	a.insertBefore(img, a.firstChild);

	var link = document.createElement("link");
	link.rel = "shortcut icon";
	link.href = icon;
	document.documentElement.insertBefore(link, document.documentElement.firstChild);
}
</script>
<script type="text/javascript" src="http://infocatcher.github.io/Custom_Buttons/viewCustomButton.js"></script>
<script type="text/javascript">
if("viewCustomButtonCode" in window) setTimeout(function() {
	viewCustomButtonCode(a.href);
}, 0);
</script>
</body>