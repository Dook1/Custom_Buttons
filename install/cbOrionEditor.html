<!DOCTYPE HTML>
<meta charset="utf-8"/>
<title>Orion Editor [0.1.0a3 - 2013-09-12]</title>
<body>
<a href="custombutton://%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%3F%3E%0D%0A%3Ccustombutton%20xmlns%3Acb%3D%22http%3A//xsms.nm.ru/custombuttons/%22%3E%0A%20%20%3Cname%3EOrion%20Editor%3C/name%3E%0A%20%20%3Cimage%3E%3C%21%5BCDATA%5Bdata%3Aimage/png%3Bbase64%2CiVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAALtSURBVBgZTcFLaFxVAIDh/5577jwzj0wSUmqMtKIiBltbbJ1FUCxVoQu3FrHGVRU3BVcKrkTcKOhCUOtOAyJ23WIQtFawpoooZWKJpnbsNJN5PzP3PO5xArPo93nOOfasXCgfAz48mE8UhzpiqCN0FLFrog7QA+qABVpAA/gC+FYyERlz/NC+qeIbT85xt4GKckMV5Voju6A09ELLzXqfi38PTgLnJBORMfPZmMeectsSeB7SA19CPBAsxgW+EAQ+PLaQZH8uXTj/S+UDwYTVOitxmAh6yqOjoR1CZwSdETR2Yadv2fPm6i2KB9IszQZzkgkVmvnLZcuP21VeO1rgs+tdAu1YOZxlKiHw8fA9iADPdvn5nxa/3epUBGOH39sqjETu2UJG4oUwDB2RcmRSHuevdtjpWgZhxEBH4KDaDflobbNrlVoRh97demHpgfTth+5J5ZpNw5kjWQxw6mCa7aYlk4bPr7X54XqfkfGIHNjAYpQ6cOH1x9fEw/cnP13M+Ik7bc3ZYxniMR9PQCElObmYptox7E97XK0MscbhHJgwxKrQMiZ+v9Y9u3knHBUCn08ut6m2DQJHe6C5WOqQl4KbVcXR2QSxwENbS38wNEapLmNi4/0Hv/r3zxvHN0p1YnGP1e/r4ODr9TbZlKBTU7xSnKG4lCUZQKMfYkJVvfT2c44xyVjKr6lpEUI3g3UOPIE1lu6O5aUTcyRjPjhISUGttYtVYYUJuXxudRZ4p/jIvZx+eoHvSopmz/Ly8jyJwBFIkD7EfMimYLM8xChVZUJapU4Ap34tbdHalfRDh7aOUHsoE2FsROQchVyOV5/Zx3ZjiFWqxoS0Wh95/qlHk2+9+AR3sw60dSgDOPj4UoVUAL3+EKt1gwlptd7arnf4cq1EfipJPpsgn46TS8fJpGLEY4K4FJxenicuodbsYbX+jwkZGfPNlfWNhSvrG/cBM8AMMA1MA7lELAgSiYBsOkk+m+KPv8o3gJ+Y+B9yFXCQeyJWrQAAAABJRU5ErkJggg%3D%3D%5D%5D%3E%3C/image%3E%0A%20%20%3Cmode%3E0%3C/mode%3E%0A%20%20%3Cinitcode%3E%3C%21%5BCDATA%5B//%20https%3A//github.com/Infocatcher/Custom_Buttons/tree/master/CB_Orion_Editor%0A//%20http%3A//infocatcher.ucoz.net/js/cb/cbOrionEditor.js%0A%0A//%20Orion%20Editor%20button%20for%20Custom%20Buttons%0A//%20%28code%20for%20%22initialization%22%20section%29%0A%0A//%20%28c%29%20Infocatcher%202012-2013%0A//%20version%200.1.0a3%20-%202013-09-12%0A%0Aconst%20watcherId%20%3D%20%22customButtonsOrionEditor_%22%20+%20this.id%3B%0Avar%20%7BApplication%2C%20Components%7D%20%3D%20window%3B%20//%20Prevent%20garbage%20collection%20in%20Firefox%203.6%20and%20older%0Avar%20watcher%20%3D%20Application.storage.get%28watcherId%2C%20null%29%3B%0Aif%28%21watcher%29%20%7B%0A%09watcher%20%3D%20%7B%0A%09%09REASON_STARTUP%3A%201%2C%0A%09%09REASON_SHUTDOWN%3A%202%2C%0A%09%09REASON_WINDOW_LOADED%3A%203%2C%0A%09%09REASON_WINDOW_CLOSED%3A%204%2C%0A%0A%09%09get%20obs%28%29%20%7B%0A%09%09%09delete%20this.obs%3B%0A%09%09%09return%20this.obs%20%3D%20Components.classes%5B%22@mozilla.org/observer-service%3B1%22%5D%0A%09%09%09%09.getService%28Components.interfaces.nsIObserverService%29%3B%0A%09%09%7D%2C%0A%09%09get%20ww%28%29%20%7B%0A%09%09%09delete%20this.ww%3B%0A%09%09%09return%20this.ww%20%3D%20Components.classes%5B%22@mozilla.org/embedcomp/window-watcher%3B1%22%5D%0A%09%09%09%09.getService%28Components.interfaces.nsIWindowWatcher%29%3B%0A%09%09%7D%2C%0A%09%09get%20wm%28%29%20%7B%0A%09%09%09delete%20this.wm%3B%0A%09%09%09return%20this.wm%20%3D%20Components.classes%5B%22@mozilla.org/appshell/window-mediator%3B1%22%5D%0A%09%09%09%09.getService%28Components.interfaces.nsIWindowMediator%29%3B%0A%09%09%7D%2C%0A%09%09init%3A%20function%28reason%29%20%7B%0A%09%09%09this.obs.addObserver%28this%2C%20%22quit-application-granted%22%2C%20false%29%3B%0A%09%09%09var%20ws%20%3D%20this.wm.getEnumerator%28null%29%3B%0A%09%09%09while%28ws.hasMoreElements%28%29%29%0A%09%09%09%09this.initWindow%28ws.getNext%28%29%2C%20reason%29%3B%0A%09%09%09this.ww.registerNotification%28this%29%3B%0A%09%09%7D%2C%0A%09%09destroy%3A%20function%28reason%29%20%7B%0A%09%09%09this.obs.removeObserver%28this%2C%20%22quit-application-granted%22%29%3B%0A%09%09%09var%20ws%20%3D%20this.wm.getEnumerator%28null%29%3B%0A%09%09%09while%28ws.hasMoreElements%28%29%29%0A%09%09%09%09this.destroyWindow%28ws.getNext%28%29%2C%20reason%29%3B%0A%09%09%09this.ww.unregisterNotification%28this%29%3B%0A%09%09%7D%2C%0A%09%09initWindow%3A%20function%28window%2C%20reason%29%20%7B%0A%09%09%09if%28%21this.isTargetWindow%28window%29%29%0A%09%09%09%09return%3B%0A%09%09%09var%20document%20%3D%20window.document%3B%0A%0A%09%09%09//%20See%20view-source%3Achrome%3A//browser/content/devtools/scratchpad.xul%0A%09%09%09//%20+%20view-source%3Achrome%3A//browser/content/devtools/source-editor-overlay.xul%0A%09%09%09var%20psXUL%20%3D%20%28%27%3Cpopupset%20id%3D%22orionEditorPopupset%22%5C%0A%09%09%09%09xmlns%3D%22http%3A//www.mozilla.org/keymaster/gatekeeper/there.is.only.xul%22%3E%5C%0A%09%09%09%09%3Cmenupopup%20id%3D%22orionEditorContext%22%5C%0A%09%09%09%09%09onpopupshowing%3D%22goUpdateSourceEditorMenuItems%28%29%22%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-undo%22/%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-redo%22/%3E%5C%0A%09%09%09%09%09%3Cmenuseparator/%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-cut%22/%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-copy%22/%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-paste%22/%3E%5C%0A%09%09%09%09%09%3Cmenuseparator/%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-selectAll%22/%3E%5C%0A%09%09%09%09%09%3Cmenuseparator/%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-find%22/%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-findAgain%22/%3E%5C%0A%09%09%09%09%09%3Cmenuseparator/%3E%5C%0A%09%09%09%09%09%3Cmenuitem%20id%3D%22se-menu-gotoLine%22/%3E%5C%0A%09%09%09%09%3C/menupopup%3E%5C%0A%09%09%09%3C/popupset%3E%27%29%0A%09%09%09.replace%28/%3E%5Cs+%3C/g%2C%20%22%3E%3C%22%29%3B%0A%09%09%09var%20ps%20%3D%20new%20DOMParser%28%29.parseFromString%28psXUL%2C%20%22application/xml%22%29.documentElement%3B%0A%09%09%09document.documentElement.appendChild%28ps%29%3B%0A%0A%09%09%09window.setTimeout%28function%28%29%20%7B%0A%09%09%09%09function%20appendNode%28nodeName%2C%20id%29%20%7B%0A%09%09%09%09%09var%20node%20%3D%20document.createElement%28nodeName%29%3B%0A%09%09%09%09%09node.id%20%3D%20id%3B%0A%09%09%09%09%09document.documentElement.appendChild%28node%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09appendNode%28%22commandset%22%2C%20%22editMenuCommands%22%29%3B%0A%09%09%09%09appendNode%28%22commandset%22%2C%20%22sourceEditorCommands%22%29%3B%0A%09%09%09%09appendNode%28%22keyset%22%2C%20%22sourceEditorKeys%22%29%3B%0A%09%09%09%09appendNode%28%22keyset%22%2C%20%22editMenuKeys%22%29%3B%0A%09%09%09%7D%2C%2050%29%3B%0A%09%09%09window.setTimeout%28function%28%29%20%7B%0A%09%09%09%09document.loadOverlay%28%22chrome%3A//global/content/editMenuOverlay.xul%22%2C%20null%29%3B%0A%09%09%09%09window.setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09document.loadOverlay%28%22chrome%3A//browser/content/devtools/source-editor-overlay.xul%22%2C%20null%29%3B%0A%09%09%09%09%7D%2C%20500%29%3B%0A%09%09%09%7D%2C%20700%29%3B%0A%0A%09%09%09Components.classes%5B%22@mozilla.org/moz/jssubscript-loader%3B1%22%5D%0A%09%09%09%09.getService%28Components.interfaces.mozIJSSubScriptLoader%29%0A%09%09%09%09.loadSubScript%28%22chrome%3A//global/content/globalOverlay.js%22%2C%20window%29%3B%0A%0A%09%09%09Components.utils.import%28%22resource%3A///modules/source-editor.jsm%22%2C%20window%29%3B%0A%09%09%09var%20SourceEditor%20%3D%20window.SourceEditor%3B%0A%0A%09%09%09Array.slice%28document.getElementsByTagName%28%22cbeditor%22%29%29.forEach%28function%28cbEditor%29%20%7B%0A%09%09%09%09if%28%22__orion%22%20in%20cbEditor%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09var%20code%20%3D%20cbEditor.value%3B%0A%09%09%09%09var%20se%20%3D%20new%20SourceEditor%28%29%3B%0A%09%09%09%09var%20orionElt%20%3D%20document.createElement%28%22hbox%22%29%3B%0A%09%09%09%09orionElt.className%20%3D%20%22orionEditor%22%3B%0A%09%09%09%09orionElt.setAttribute%28%22flex%22%2C%201%29%3B%0A%09%09%09%09orionElt.__orion%20%3D%20se%3B%0A%09%09%09%09cbEditor.parentNode.insertBefore%28orionElt%2C%20cbEditor%29%3B%0A%09%09%09%09//cbEditor.setAttribute%28%22hidden%22%2C%20%22true%22%29%3B%0A%09%09%09%09cbEditor.setAttribute%28%22collapsed%22%2C%20%22true%22%29%3B%0A%09%09%09%09cbEditor.parentNode.appendChild%28cbEditor%29%3B%0A%09%09%09%09cbEditor.__orion%20%3D%20se%3B%0A%09%09%09%09cbEditor.__orionElt%20%3D%20orionElt%3B%0A%09%09%09%09cbEditor.__defineGetter__%28%22value%22%2C%20function%28%29%20%7B%0A%09%09%09%09%09if%28%22__orion%22%20in%20this%29%20%7B%0A%09%09%09%09%09%09var%20orion%20%3D%20this.__orion%3B%0A%09%09%09%09%09%09if%28%21orion.__initialized%29%0A%09%09%09%09%09%09%09return%20orion.__value%3B%0A%09%09%09%09%09%09return%20orion.getText%28%29.replace%28/%5Cr%5Cn%3F%7C%5Cn%5Cr%3F/g%2C%20%22%5Cn%22%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20this.textbox.value%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09cbEditor.__defineSetter__%28%22value%22%2C%20function%28v%29%20%7B%0A%09%09%09%09%09if%28%22__orion%22%20in%20this%29%20%7B%0A%09%09%09%09%09%09var%20orion%20%3D%20this.__orion%3B%0A%09%09%09%09%09%09if%28%21orion.__initialized%29%20%7B%0A%09%09%09%09%09%09%09var%20_this%20%3D%20this%3B%0A%09%09%09%09%09%09%09orion.__onLoadCallbacks.push%28function%28%29%20%7B%0A%09%09%09%09%09%09%09%09_this.value%20%3D%20v%3B%0A%09%09%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09%09%09return%20orion.__value%20%3D%20v%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09return%20orion.setText%28v.replace%28/%5Cr%5Cn%3F%7C%5Cn%5Cr%3F/g%2C%20%22%5Cn%22%29%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20this.textbox.value%20%3D%20v%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09cbEditor.selectLine%20%3D%20function%28lineNumber%29%20%7B%0A%09%09%09%09%09if%28%22__orion%22%20in%20this%29%20%7B%0A%09%09%09%09%09%09var%20orion%20%3D%20this.__orion%3B%0A%09%09%09%09%09%09if%28%21orion.__initialized%29%20%7B%0A%09%09%09%09%09%09%09var%20_this%20%3D%20this%2C%20args%20%3D%20arguments%3B%0A%09%09%09%09%09%09%09orion.__onLoadCallbacks.push%28function%28%29%20%7B%0A%09%09%09%09%09%09%09%09_this.selectLine.apply%28_this%2C%20args%29%3B%0A%09%09%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09%09%09return%20undefined%3B%0A%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09var%20ss%20%3D%20orion.getLineStart%28lineNumber%20-%201%29%3B%0A%09%09%09%09%09%09var%20se%20%3D%20orion.getLineEnd%28lineNumber%20-%201%2C%20false%29%3B%0A%09%09%09%09%09%09orion.focus%28%29%3B%0A%09%09%09%09%09%09return%20orion.setSelection%28ss%2C%20se%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%09return%20this.__proto__.selectLine.apply%28this%2C%20arguments%29%3B%0A%09%09%09%09%7D%3B%0A%09%09%09%09se.__initialized%20%3D%20false%3B%0A%09%09%09%09se.__onLoadCallbacks%20%3D%20%5B%5D%3B%0A%09%09%09%09se.__value%20%3D%20code%3B%0A%09%09%09%09se.init%28%0A%09%09%09%09%09orionElt%2C%0A%09%09%09%09%09%7B%0A%09%09%09%09%09%09mode%3A%20SourceEditor.MODES.JAVASCRIPT%2C%0A%09%09%09%09%09%09showLineNumbers%3A%20true%2C%0A%09%09%09%09%09%09initialText%3A%20code%2C%0A%09%09%09%09%09%09placeholderText%3A%20code%2C%20//%20For%20backward%20compatibility%0A%09%09%09%09%09%09contextMenu%3A%20%22orionEditorContext%22%0A%09%09%09%09%09%7D%2C%0A%09%09%09%09%09function%20callback%28%29%20%7B%0A%09%09%09%09%09%09se.__initialized%20%3D%20true%3B%0A%09%09%09%09%09%09se.__onLoadCallbacks.forEach%28function%28fn%29%20%7B%0A%09%09%09%09%09%09%09try%20%7B%0A%09%09%09%09%09%09%09%09fn%28%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%09catch%28e%29%20%7B%0A%09%09%09%09%09%09%09%09Components.utils.reportError%28e%29%3B%0A%09%09%09%09%09%09%09%7D%0A%09%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09%09delete%20se.__onLoadCallbacks%3B%0A%09%09%09%09%09%09delete%20se.__value%3B%0A%0A%09%09%09%09%09%09se.resetUndo%20%26%26%20se.resetUndo%28%29%3B%0A%09%09%09%09%09%09var%20onTextChanged%20%3D%20se.__onTextChanged%20%3D%20function%28%29%20%7B%0A%09%09%09%09%09%09%09window.editor.changed%20%3D%20true%3B%0A%09%09%09%09%09%09%7D%3B%0A%09%09%09%09%09%09se.addEventListener%28SourceEditor.EVENTS.TEXT_CHANGED%2C%20onTextChanged%29%3B%0A%0A%09%09%09%09%09%09//%20Hack%20to%20use%20selected%20editor%0A%09%09%09%09%09%09var%20controller%20%3D%20se.ui._controller%3B%0A%09%09%09%09%09%09var%20tabs%20%3D%20document.getElementById%28%22custombuttons-editbutton-tabbox%22%29%3B%0A%09%09%09%09%09%09controller.__defineGetter__%28%22_editor%22%2C%20function%28%29%20%7B%0A%09%09%09%09%09%09%09var%20orionElt%20%3D%20tabs.selectedPanel%3B%0A%09%09%09%09%09%09%09var%20orion%20%3D%20orionElt%20%26%26%20orionElt.__orion%0A%09%09%09%09%09%09%09%09%7C%7C%20document.getElementsByTagName%28%22cbeditor%22%29%5B0%5D.__orion%3B%0A%09%09%09%09%09%09%09return%20orion%3B%0A%09%09%09%09%09%09%7D%29%3B%0A%09%09%09%09%09%09controller.__defineSetter__%28%22_editor%22%2C%20function%28%29%20%7B%7D%29%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%29%3B%0A%09%09%09%7D%2C%20this%29%3B%0A%0A%09%09%09var%20origExecCmd%20%3D%20window.editor.execute_oncommand_code%3B%0A%09%09%09window.editor.execute_oncommand_code%20%3D%20function%28%29%20%7B%0A%09%09%09%09var%20cd%20%3D%20document.commandDispatcher%3B%0A%09%09%09%09var%20cdFake%20%3D%20%7B%0A%09%09%09%09%09__proto__%3A%20cd%2C%0A%09%09%09%09%09get%20focusedElement%28%29%20%7B%0A%09%09%09%09%09%09var%20tabs%20%3D%20document.getElementById%28%22custombuttons-editbutton-tabbox%22%29%3B%0A%09%09%09%09%09%09var%20selectedTab%20%3D%20tabs.selectedTab%3B%0A%09%09%09%09%09%09if%28selectedTab%20%26%26%20selectedTab.id%20%3D%3D%20%22code-tab%22%29%0A%09%09%09%09%09%09%09return%20document.getElementById%28%22code%22%29.textbox.inputField%3B%0A%09%09%09%09%09%09return%20cd.focusedElement%3B%0A%09%09%09%09%09%7D%0A%09%09%09%09%7D%3B%0A%09%09%09%09document.__defineGetter__%28%22commandDispatcher%22%2C%20function%28%29%20%7B%0A%09%09%09%09%09return%20cdFake%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09try%20%7B%0A%09%09%09%09%09var%20ret%20%3D%20origExecCmd.apply%28this%2C%20arguments%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09catch%28e%29%20%7B%0A%09%09%09%09%09Components.utils.reportError%28e%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09//%20document.hasOwnProperty%28%22commandDispatcher%22%29%20%3D%3D%20false%2C%20so%20we%20cat%20just%20delete%20our%20fake%20property%0A%09%09%09%09delete%20document.commandDispatcher%3B%0A%09%09%09%09return%20ret%3B%0A%09%09%09%7D%3B%0A%0A%09%09%09window.addEventListener%28%22load%22%2C%20function%20ensureObserversAdded%28%29%20%7B%0A%09%09%09%09window.removeEventListener%28%22load%22%2C%20ensureObserversAdded%2C%20false%29%3B%0A%09%09%09%09window.setTimeout%28function%28%29%20%7B%20window.editor.removeObservers%28%29%3B%20%7D%2C%200%29%3B%0A%09%09%09%09window.setTimeout%28function%28%29%20%7B%20window.editor.addObservers%28%29%3B%20%20%20%20%7D%2C%200%29%3B%0A%09%09%09%7D%2C%20false%29%3B%0A%09%09%7D%2C%0A%09%09destroyWindow%3A%20function%28window%2C%20reason%29%20%7B%0A%09%09%09if%28reason%20%3D%3D%20this.REASON_WINDOW_CLOSED%29%0A%09%09%09%09window.removeEventListener%28%22DOMContentLoaded%22%2C%20this%2C%20false%29%3B%20//%20Window%20can%20be%20closed%20before%20DOMContentLoaded%0A%09%09%09if%28%21this.isTargetWindow%28window%29%29%0A%09%09%09%09return%3B%0A%09%09%09var%20document%20%3D%20window.document%3B%0A%0A%09%09%09Array.slice%28document.getElementsByTagName%28%22cbeditor%22%29%29.forEach%28function%28cbEditor%29%20%7B%0A%09%09%09%09if%28%21%28%22__orion%22%20in%20cbEditor%29%29%0A%09%09%09%09%09return%3B%0A%09%09%09%09var%20se%20%3D%20cbEditor.__orion%3B%0A%09%09%09%09se.removeEventListener%28window.SourceEditor.EVENTS.TEXT_CHANGED%2C%20se.__onTextChanged%29%3B%0A%09%09%09%09delete%20se.__onTextChanged%3B%0A%09%09%09%09if%28reason%20%3D%3D%20this.REASON_SHUTDOWN%29%20%7B%0A%09%09%09%09%09var%20val%20%3D%20cbEditor.value%3B%0A%09%09%09%09%09delete%20cbEditor.value%3B%0A%09%09%09%09%09delete%20cbEditor.selectLine%3B%0A%0A%09%09%09%09%09var%20orionElt%20%3D%20cbEditor.__orionElt%3B%0A%09%09%09%09%09orionElt.parentNode.insertBefore%28cbEditor%2C%20orionElt%29%3B%0A%09%09%09%09%09orionElt.parentNode.removeChild%28orionElt%29%3B%0A%09%09%09%09%09delete%20cbEditor.__orionElt%3B%0A%09%09%09%09%09delete%20cbEditor.__orion%3B%0A%09%09%09%09%09delete%20orionElt.__orion%3B%0A%0A%09%09%09%09%09cbEditor.value%20%3D%20val%3B%0A%09%09%09%09%09window.setTimeout%28function%28%29%20%7B%0A%09%09%09%09%09%09cbEditor.removeAttribute%28%22collapsed%22%29%3B%0A%09%09%09%09%09%7D%2C%200%29%3B%0A%09%09%09%09%7D%0A%09%09%09%09se.destroy%28%29%3B%0A%09%09%09%7D%2C%20this%29%3B%0A%0A%09%09%09if%28reason%20%3D%3D%20this.REASON_SHUTDOWN%29%20%7B%0A%09%09%09%09delete%20window.editor.execute_oncommand_code%3B%0A%09%09%09%09%5B%0A%09%09%09%09%09%22orionEditorPopupset%22%2C%0A%09%09%09%09%09%22editMenuCommands%22%2C%0A%09%09%09%09%09%22sourceEditorCommands%22%2C%0A%09%09%09%09%09%22sourceEditorKeys%22%2C%0A%09%09%09%09%09%22editMenuKeys%22%0A%09%09%09%09%5D.forEach%28function%28id%29%20%7B%0A%09%09%09%09%09var%20node%20%3D%20document.getElementById%28id%29%3B%0A%09%09%09%09%09node%20%26%26%20node.parentNode.removeChild%28node%29%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09%5B%0A%09%09%09%09%09//%20chrome%3A//global/content/globalOverlay.js%0A%09%09%09%09%09%22closeWindow%22%2C%20%22canQuitApplication%22%2C%20%22goQuitApplication%22%2C%20%22goUpdateCommand%22%2C%20%22goDoCommand%22%2C%0A%09%09%09%09%09%22goSetCommandEnabled%22%2C%20%22goSetMenuValue%22%2C%20%22goSetAccessKey%22%2C%20%22goOnEvent%22%2C%20%22visitLink%22%2C%0A%09%09%09%09%09%22setTooltipText%22%2C%20%22NS_ASSERT%22%2C%0A%09%09%09%09%09//%20chrome%3A//global/content/editMenuOverlay.xul%20%3D%3E%20view-source%3Achrome%3A//global/content/editMenuOverlay.js%0A%09%09%09%09%09%22goUpdateGlobalEditMenuItems%22%2C%20%22goUpdateUndoEditMenuItems%22%2C%20%22goUpdatePasteMenuItems%22%0A%09%09%09%09%5D.forEach%28function%28p%29%20%7B%0A%09%09%09%09%09delete%20window%5Bp%5D%3B%0A%09%09%09%09%7D%29%3B%0A%09%09%09%09delete%20window.SourceEditor%3B%0A%09%09%09%7D%0A%09%09%7D%2C%0A%09%09isTargetWindow%3A%20function%28window%29%20%7B%0A%09%09%09return%20window.location.href.substr%280%2C%2041%29%20%3D%3D%20%22chrome%3A//custombuttons/content/editor.xul%22%3B%0A%09%09%7D%2C%0A%09%09observe%3A%20function%28subject%2C%20topic%2C%20data%29%20%7B%0A%09%09%09if%28topic%20%3D%3D%20%22quit-application-granted%22%29%0A%09%09%09%09this.destroy%28%29%3B%0A%09%09%09else%20if%28topic%20%3D%3D%20%22domwindowopened%22%29%0A%09%09%09%09subject.addEventListener%28%22DOMContentLoaded%22%2C%20this%2C%20false%29%3B%0A%09%09%09else%20if%28topic%20%3D%3D%20%22domwindowclosed%22%29%0A%09%09%09%09this.destroyWindow%28subject%2C%20this.REASON_WINDOW_CLOSED%29%3B%0A%09%09%7D%2C%0A%09%09handleEvent%3A%20function%28e%29%20%7B%0A%09%09%09var%20trg%20%3D%20e.originalTarget%20%7C%7C%20e.target%3B%0A%09%09%09var%20window%3B%0A%09%09%09switch%28e.type%29%20%7B%0A%09%09%09%09case%20%22DOMContentLoaded%22%3A%0A%09%09%09%09%09window%20%3D%20trg.defaultView%3B%0A%09%09%09%09%09window.removeEventListener%28%22DOMContentLoaded%22%2C%20this%2C%20false%29%3B%0A%09%09%09%09%09this.initWindow%28window%2C%20this.REASON_WINDOW_LOADED%29%3B%0A%09%09%09%7D%0A%09%09%7D%0A%09%7D%3B%0A%09Application.storage.set%28watcherId%2C%20watcher%29%3B%0A%09setTimeout%28function%28%29%20%7B%0A%09%09watcher.init%28watcher.REASON_STARTUP%29%3B%0A%09%7D%2C%2050%29%3B%0A%7D%0Afunction%20destructor%28reason%29%20%7B%0A%09if%28reason%20%3D%3D%20%22update%22%20%7C%7C%20reason%20%3D%3D%20%22delete%22%29%20%7B%0A%09%09watcher.destroy%28watcher.REASON_SHUTDOWN%29%3B%0A%09%09Application.storage.set%28watcherId%2C%20null%29%3B%0A%09%7D%0A%7D%0Aif%28%0A%09typeof%20addDestructor%20%3D%3D%20%22function%22%20//%20Custom%20Buttons%200.0.5.6pre4+%0A%09%26%26%20addDestructor%20%21%3D%20%28%22addDestructor%22%20in%20window%20%26%26%20window.addDestructor%29%0A%29%0A%09addDestructor%28destructor%2C%20this%29%3B%0Aelse%0A%09this.onDestroy%20%3D%20destructor%3B%5D%5D%3E%3C/initcode%3E%0A%20%20%3Ccode%3E%3C%21%5BCDATA%5B/*CODE*/%5D%5D%3E%3C/code%3E%0A%20%20%3Caccelkey%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/accelkey%3E%0A%20%20%3Chelp%3E%3C%21%5BCDATA%5B%5D%5D%3E%3C/help%3E%0A%20%20%3Cattributes/%3E%0A%3C/custombutton%3E"
>Install</a>
| <a href="https://github.com/Infocatcher/Custom_Buttons/tree/master/CB_Orion_Editor">Source</a>
<script type="text/javascript">
var a = document.getElementsByTagName("a")[0];
a.title = document.title;
if(/%3Cimage%3E%3C%21%5BCDATA%5B(data%3A\S+)%5D%5D%3E%3C\/image%3E/.test(a.href)) {
	var icon = decodeURIComponent(RegExp.$1);

	var img = document.createElement("img");
	img.src = icon;
	img.alt = "";
	img.style.verticalAlign = "middle";
	img.style.marginRight = "4px";
	img.style.border = "none";
	a.insertBefore(img, a.firstChild);

	var link = document.createElement("link");
	link.rel = "shortcut icon";
	link.href = icon;
	document.documentElement.insertBefore(link, document.documentElement.firstChild);
}
</script>
<script type="text/javascript" src="http://infocatcher.github.io/Custom_Buttons/viewCustomButton.js"></script>
<script type="text/javascript">
if("viewCustomButtonCode" in window) setTimeout(function() {
	viewCustomButtonCode(a.href);
}, 0);
</script>
</body>